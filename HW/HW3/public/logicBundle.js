!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=29)}({29:function(t,e,i){(function(e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}var s=i(30),a=s.dispatchChangeGameState,h=s.dispatchStartGame,c=s.dispatchEndGame,u=i(6),d=u.width,f=u.height,y=u.frameRate,l=u.directions,p=l.UP,w=l.DOWN,b=l.LEFT,k=l.RIGHT,v=function(){function t(e,i){if(n(this,t),!e||!i)throw new Error("You're missing either height or width");for(var r={x:Math.floor(e/2),y:Math.floor(i/2)},o=[],s=r.x,a=r.y,h=1;h<5;h+=1)o.push({x:s,y:a+h});this.body=[r].concat(o),this.direction=p,this.move=this.move.bind(this),this.changeDirection=this.changeDirection.bind(this)}return o(t,[{key:"move",value:function(t){t||(this.body=this.body.slice(0,this.body.length-1));var e=this.body[0],i=e.x,n=e.y;switch(this.direction){case p:this.body=[{x:i,y:n-1}].concat(this.body);break;case w:this.body=[{x:i,y:n+1}].concat(this.body);break;case b:this.body=[{x:i-1,y:n}].concat(this.body);break;case k:this.body=[{x:i+1,y:n}].concat(this.body)}}},{key:"changeDirection",value:function(t){if(![p,w,b,k].includes(t))throw new Error("Direction not found!");switch(t){case p:if(this.direction===w)return;break;case w:if(this.direction===p)return;break;case b:if(this.direction===k)return;break;case k:if(this.direction===b)return;break;default:return}this.direction=t}}]),t}(),m=function(){function t(e,i,r){if(n(this,t),!e||!i)throw new Error("You're missing either height or width");this.width=e,this.height=i,this.playing=!1,this.snake=new v(e,i),this.keyPressed=!1,this.frameRate=r,this.updateGameState=this.updateGameState.bind(this),this.checkCollision=this.checkCollision.bind(this),this.spawnFood=this.spawnFood.bind(this),this.reset=this.reset.bind(this),this.startGame=this.startGame.bind(this),this.endGame=this.endGame.bind(this),this.spawnFood(),a(this.snake,this.food)}return o(t,[{key:"spawnFood",value:function(){this.food={x:Math.floor(Math.random()*this.width),y:Math.floor(Math.random()*this.height)}}},{key:"checkCollision",value:function(){var t=this.snake.body,e=t[0],i=e.x,n=e.y;if(i>=this.width||n>=this.height||i<0||n<0)return this.endGame(),!0;var r=!1,o=this;return t.slice(1).forEach(function(t){i===t.x&&n===t.y&&(o.endGame(),r=!0)}),r}},{key:"shouldGrow",value:function(){var t=this.snake.body[0],e=t.x,i=t.y;return this.food.x===e&&this.food.y===i&&(this.spawnFood(),!0)}},{key:"updateGameState",value:function(){var t=this.shouldGrow();this.snake.move(t),this.keyPressed=!1,this.checkCollision()||(t&&this.spawnFood(),a(this.snake,this.food))}},{key:"startGame",value:function(){h(),this.playing=!0,this.gameInterval=setInterval(this.updateGameState,y)}},{key:"endGame",value:function(){c(),clearInterval(this.gameInterval)}},{key:"reset",value:function(){this.playing&&(this.playing=!1,this.snake=new v(this.width,this.height),this.keyPressed=!1,clearInterval(this.gameInterval),this.spawnFood(),a(this.snake,this.food))}}]),t}(),G=new m(d,f,y);function g(t){return function(e){if("r"!==e.key)if(t.playing){if(!t.keyPressed)switch(e.key){case"ArrowUp":t.keyPressed=e.key,t.snake.changeDirection(p);break;case"ArrowDown":t.keyPressed=e.key,t.snake.changeDirection(w);break;case"ArrowLeft":t.keyPressed=e.key,t.snake.changeDirection(b);break;case"ArrowRight":t.keyPressed=e.key,t.snake.changeDirection(k)}}else" "===e.key&&t.startGame();else t.reset()}}var E=function(){G.reset()};try{window.onKeyDown=g(G),window.reset=E}catch(t){e.onKeyDown=g(G),e.reset=E}t.exports={Game:m,Snake:v,onKeyDownGenerator:g}}).call(this,i(3))},3:function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},30:function(t,e,i){(function(e){var n;try{n=window.store}catch(t){n=e.store}var r=i(6),o=r.width,s=r.height,a=i(8),h=a.END_GAME,c=a.CHANGE_GAME_STATE,u=a.START_GAME,d=1,f=2;t.exports={dispatchChangeGameState:function(t,e){var i=function(){for(var t=[],e=0;e<s;e+=1){for(var i=[],n=0;n<o;n+=1)i.push(0);t.push(i)}return t}();t.body.forEach(function(t){var e=t.x,n=t.y;i[n][e]=d}),e&&(i[e.y][e.x]=f),n.dispatch({type:c,newGameState:i})},dispatchStartGame:function(){return n.dispatch({type:u})},dispatchEndGame:function(){return n.dispatch({type:h})}}}).call(this,i(3))},6:function(t,e){t.exports={width:40,height:30,frameRate:80,directions:{UP:"UP",DOWN:"DOWN",LEFT:"LEFT",RIGHT:"RIGHT"}}},8:function(t,e){t.exports={CHANGE_GAME_STATE:"CHANGE_GAME_STATE",END_GAME:"END_GAME",START_GAME:"START_GAME"}}});